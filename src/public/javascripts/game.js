// Generated by CoffeeScript 1.10.0
var CANVAS_HEIGHT, CANVAS_WIDTH, Player, StarShip, animate, canvas, context, keysDown, player, playerShip, render, step, update;

animate = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback) {
  window.setTimeout(callback, 1000 / 60);
};

canvas = document.createElement('canvas');

CANVAS_WIDTH = 1200;

CANVAS_HEIGHT = 900;

canvas.width = CANVAS_WIDTH;

canvas.height = CANVAS_HEIGHT;

context = canvas.getContext('2d');

window.onload = function() {
  document.body.appendChild(canvas);
  animate(step);
};

keysDown = {};

window.addEventListener("keydown", function(event) {
  keysDown[event.keyCode] = true;
});

window.addEventListener("keyup", function(event) {
  delete keysDown[event.keyCode];
});

playerShip = StarShip("The constellation");

player = Player("firejack", playerShip);

step = function() {
  update();
  render();
  animate(step);
};

update = function() {};

render = function() {
  context.fillStyle = "#000000";
  context.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
  playerShip.render();
};

StarShip = (function() {
  StarShip.shipName;

  StarShip.x = 200;

  StarShip.y = 200;

  StarShip.vx = 0;

  StarShip.vy = 0;

  function StarShip(shipName1, x1, y1) {
    this.shipName = shipName1;
    this.x = x1;
    this.y = y1;
    this.shipName = shipName;
    this.x = x || 200;
    this.y = y || 200;
    return;
  }

  StarShip.prototype.render = function() {
    context.beginPath();
    context.arc(this.x, this.y, 4, 2 * Math.PI, false);
    context.fillStyle = "rgba(255, 255, 255, 1)";
    context.fill();
  };

  StarShip.prototype.move = function(x, y) {
    this.vx += x;
    this.vy += y;
    if (this.x < 0) {
      this.x = 0;
      this.vx = 0;
    }
    if (this.x > CANVAS_WIDTH) {
      this.x = CANVAS_WIDTH;
      this.vx = 0;
    }
    if (this.y < 0) {
      this.y = 0;
      this.vy = 0;
    }
    if (this.y > CANVAS_HEIGHT) {
      this.y = CANVAS_HEIGHT;
      return this.vy = 0;
    }
  };

  return StarShip;

})();

Player = (function() {
  Player.name;

  Player.ship;

  function Player(name, ship) {
    this.name = name;
    this.ship = ship;
    this.name = this.name;
    this.ship = this.ship;
  }

  Player.prototype.update = function() {
    var key, val;
    for (key in keydown) {
      val = Number(key);
      if (val === 37) {
        this.ship.move(-1, 0);
      }
      if (val === 38) {
        this.ship.move(0, 1);
      }
      if (val === 39) {
        this.ship.move(1, 0);
      }
      if (val === 40) {
        this.ship.move(0, -1);
      }
    }
  };

  return Player;

})();
